!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="13af7aab-7956-4ff3-a00c-bed6d546ee7f",e._sentryDebugIdIdentifier="sentry-dbid-13af7aab-7956-4ff3-a00c-bed6d546ee7f")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8662],{38662:function(e,t,a){a.d(t,{i:function(){return et}});var s=a(82323),i=a(97458),n=a(40062),d=a(87112),r=a(33101),l=a(42138),o=a(69800),c=a.n(o),u=a(89880),p=a(52983),h=a(439),m=a(36762);let f=()=>(0,p.useContext)(m.g);var v=a(25656),E=a(10123),x=a(63412),y=a(72971);let g=()=>{let{initialDepositMethod:e,initialSettleMethod:t}=f(),{data:a,loading:s,error:i}=(0,E.Z)(),n=(0,u.useRouter)(),{from:d,to:r,methodId:o}=n.query,m=(0,v.m)(),g=c().get(h.d4),b=(0,y.l)(),S=null==a?void 0:a.depositMethods,C=null==a?void 0:a.settleMethods,M=(null==g?void 0:g.split("/")[0])||(null==m?void 0:m.defaultDepositMethod),T=(null==g?void 0:g.split("/")[1])||(null==m?void 0:m.defaultSettleMethod),R=(null==S?void 0:S[d||o||M||""])||e,O=(null==C?void 0:C[r||T||""])||t;return(0,p.useEffect)(()=>{if(!S||!C||!m)return;let e=d&&!(d.toString() in S),t=r&&!(r.toString() in C);(e||t)&&((0,l.CF)({type:"error",text:"Could not find a Shift Pair for ".concat(d,"/").concat(r,". You are being redirected...")}),n.replace("/".concat(e?m.defaultDepositMethod:d,"/").concat(t?m.defaultSettleMethod:r)),c().remove(h.d4))},[d,r,S,C,m]),{depositMethod:R,settleMethod:O,updateMethods:(0,p.useCallback)(e=>{let{from:t,to:a}=e,s="/".concat(t,"/").concat(a),i=new Date;i.setTime(i.getTime()+31536e7),c().set(h.d4,"".concat(t,"/").concat(a),{path:"/",expires:i}),"/trade/[methodId]"===n.pathname?n.push("/trade/".concat(t),"/trade/".concat(t),{shallow:!0}):n.push(s,s,{shallow:!0})},[]),redirectToOrder:(0,p.useCallback)(e=>{b.set(x.I4.ORDER_ID,e.id),n.push("".concat(n.asPath.split("?")[0],"?").concat(b.toString()),void 0,{shallow:!0})},[n.push]),loadingFacts:s,error:i}};var b=a(82466),S=a(32099),C=a(73187),M=a(27306),T=a(31585),R=a(95781),O=a(19311),N=a(65538),j=a(45973),I=a(1304),D=a(91483),w=a(70345),_=a(5072),k=a(19271),P=a(97409),A=a(3371),L=a(52654),U=a(67032),F=a(991),Z=a(65320),G=a(91594),W=a(83488),V=a(73656);let z=(0,p.lazy)(()=>a.e(3686).then(a.bind(a,89756)).then(e=>({default:e.XaiWithdrawalModal}))),X="createOrderForm",{DepositMethod:B,SettleMethod:K}=j.CreateOrderFormKey,Q=e=>{let{depositMethod:t,settleMethod:a,onRedirectToOrder:n,onMethodChange:d,parentAffiliateId:r,isLoading:o}=e,{depositMethod:c,settleMethod:u,orderType:h,setValue:m,formState:{isValid:f},handleSubmit:v,quote:x,getValues:y,reset:g}=(0,w.U)(),{loading:b}=(0,P.F)(),[Q,Y]=(0,p.useState)(!1),{onSubmit:q,loading:H}=(0,W.b)({onRedirectToOrder:n,parentAffiliateId:r}),{data:J}=(0,E.Z)(),{balance:$}=(0,L.k)(),{depositMethods:ee,settleMethods:et}=J||{},ea=(null==c?void 0:c.id)==="saibal"&&(null==u?void 0:u.id)==="saibal",es=(0,k.T)(),ei=(0,k.T)(),en=(null==c?void 0:c.id)===C.yw.saibal,{accountSecret:ed}=(0,I.k)(),{rateProps:er}=(0,A.U)({depositMethod:c,settleMethod:u,isLoading:o,onError:e=>(0,l.CF)({type:"error",text:(0,M.Ii)(e.message),toastId:"".concat(null==e?void 0:e.name,"-").concat(null==c?void 0:c.id)})}),el=a&&t&&et&&ee?(0,U.d)({depositMethod:t,depositMethods:ee,settleMethod:a,settleMethods:et}):null;(0,D.t)({depositMethod:t,settleMethod:a,updateMethods:d,isAllowedShiftPair:el});let eo="beta"===V.env.REACT_APP_BACKEND_OVERRIDE,ec=!!(null==c?void 0:c.paused)||!!(null==u?void 0:u.paused),eu=(0,p.useMemo)(()=>b||!f||ec||"isLoading"in er||!ea&&!eo&&(null==c?void 0:c.id)===(null==u?void 0:u.id)||en&&"0"===$,[b,f,ec,er,ea,eo,null==c?void 0:c.id,null==u?void 0:u.id]),ep=(0,p.useMemo)(()=>h===C.mr.fixed&&x?(0,S._)((0,s._)({},er),{rate:x.rate}):(0,s._)({},er),[er,x,b]);(0,p.useEffect)(()=>{t&&a&&el&&ed&&!c&&!u&&!o&&(m(B,t),m(K,a))},[null==t?void 0:t.id,null==t?void 0:t.id,el,ed,o]);let eh=v(q);(0,_.x)("Enter",eh,!eu&&!es.isOpen&&!ei.isOpen);let em=(0,p.useMemo)(()=>"isLoading"in er?"Waiting for Rate...":c&&u&&c.id===u.id?"Cannot Shift Same Coins":ec?"Shift Pair Paused":"Shift",[er,ec,c,u]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("form",{id:X,className:"mx-auto w-full max-w-4xl pb-12",onSubmit:eh,children:(0,i.jsxs)("div",{className:"md:pt-4",children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(N.U,{depositMethod:c,settleMethod:u,disabled:o,orderType:h,onChange:e=>{let t=y();localStorage.setItem(F.uf.SELECTED_ORDER_TYPE,JSON.stringify(e)),g((0,S._)((0,s._)({},t),{[j.CreateOrderFormKey.OrderType]:e}))},"data-sentry-element":"OrderTypeToggle","data-sentry-source-file":"CreateOrder.tsx"}),(0,i.jsx)("div",{className:"right-0 top-0 flex h-full justify-center pt-6 sm:absolute sm:pt-0 md:pb-4",children:(0,i.jsx)(R.j,(0,S._)((0,s._)({Icon:h===C.mr.fixed?O.Z:null,approximate:h===C.mr.variable},ep),{"data-sentry-element":"Rate","data-sentry-source-file":"CreateOrder.tsx"}))})]}),(0,i.jsxs)("div",{className:"pt-4",children:[(0,i.jsx)(G.i,{depositOptionSelector:es,settleOptionSelector:ei,isLoading:o,onMethodChange:d,"data-sentry-element":"ShiftInputGroup","data-sentry-source-file":"CreateOrder.tsx"}),(0,i.jsx)("div",{className:"my-2",children:(0,i.jsx)(Z.C,{disabled:o,"data-sentry-element":"CreateOrderAddress","data-sentry-source-file":"CreateOrder.tsx"})}),(0,i.jsx)("div",{className:"flex flex-col gap-x-2 gap-y-4 pt-4 md:flex-row md:justify-center",children:en?(0,i.jsx)(T.z,{role:"button",type:"button",variant:"primary",className:"w-full",disabled:eu,onClick:()=>Y(!0),children:"0"===$?"No XAI Balance":"Continue"}):(0,i.jsx)(T.z,{variant:"primary",buttonSize:"normal",role:"button",type:"submit",disabled:eu,isLoading:H,className:"w-full",children:em},"shift")}),(0,i.jsx)("div",{className:"dark:border-darker-gray border-smoke flex min-w-[12rem] flex-1 items-center justify-center md:justify-end lg:border-b lg:py-4"})]})]})}),(0,i.jsx)(p.Suspense,{fallback:null,"data-sentry-element":"Suspense","data-sentry-source-file":"CreateOrder.tsx",children:(0,i.jsx)(z,{formId:X,isLoading:H,isOpen:Q,closeModal:()=>Y(!1),"data-sentry-element":"XaiWithdrawalModal","data-sentry-source-file":"CreateOrder.tsx"})})]})},Y=e=>{let{loading:t}=e,{depositMethod:a,settleMethod:s,updateMethods:n,redirectToOrder:d}=g(),r=(0,y.l)().get(x.I4.DEPOSIT_ADDRESS);return(0,b.X)({message:"Deposit address: ".concat(r," \n"),show:!!r}),(0,i.jsx)(Q,{depositMethod:a,settleMethod:s,onRedirectToOrder:e=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),d(e)},onMethodChange:n,isLoading:t,"data-sentry-element":"CreateOrder","data-sentry-component":"CreateOrderWithQuery","data-sentry-source-file":"CreateOrderWithQuery.tsx"})};var q=a(39076),H=a(5883),J=a(19106),$=a(26729),ee=a(4580);let et=e=>{let{title:t,subtitle:a,isLoading:l}=e,o=(0,y.l)().get(x.I4.ORDER_ID),{props:c,shouldShowOrderTopbar:u}=(0,ee.y)({orderId:o}),p=(0,J.P)(),{isMobileScreen:h}=(0,$.Z)(),m=p||!h;return(0,i.jsx)("div",{className:"mx-auto min-h-[90vh] w-full max-w-7xl pb-10","data-sentry-component":"ShiftApp","data-sentry-source-file":"ShiftApp.tsx",children:(0,i.jsxs)(d.M,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"ShiftApp.tsx",children:[!p&&!!t&&!!a&&(0,i.jsxs)(r.E.div,{initial:{opacity:1,height:"auto"},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{delay:.1,duration:.3},className:"mb-2 flex w-full flex-col items-center justify-between gap-4 md:gap-8",children:[(0,i.jsx)("h2",{className:"xs:text-3xl mb-4 mt-0 text-center text-2xl sm:text-4xl md:mb-0 lg:mt-2",children:(0,i.jsx)("span",{className:"font-display lowercase tracking-wider",children:t})}),(0,i.jsx)("p",{className:"my-0 text-center font-light leading-6",children:a})]},"shift-description"),(0,i.jsx)(r.E.div,{"data-sentry-element":"unknown","data-sentry-source-file":"ShiftApp.tsx",children:(0,i.jsxs)(n.Z,{variant:"extraPadding","data-sentry-element":"Card","data-sentry-source-file":"ShiftApp.tsx",children:[u&&(0,i.jsx)(r.E.div,{initial:{opacity:0,height:0,visibility:"hidden"},animate:{opacity:m?1:0,height:m?"auto":0,visibility:m?"visible":"hidden"},transition:{delay:m?.3:0,duration:.4},children:(0,i.jsx)(H.t,(0,s._)({},c))}),(0,i.jsx)(d.M,{mode:"wait","data-sentry-element":"AnimatePresence","data-sentry-source-file":"ShiftApp.tsx",children:p?(0,i.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5,delay:.4},className:"min-h-[32rem]",children:(0,i.jsx)(q.default,{orderId:o,transition:!0})},"order-app"):(0,i.jsx)(r.E.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0,transition:{delay:.3,duration:.5}},transition:{duration:.5,delay:.1},className:"min-h-[32rem]",children:(0,i.jsx)(Y,{loading:l})},"create-order-app")})]})},"shift-card")]})})}},5883:function(e,t,a){a.d(t,{t:function(){return S}});var s,i,n,d,r,l=a(97458),o=a(73187),c=a(27306),u=a(52983),p=a(5396);a(35260),(s=n||(n={})).COMPLETE="COMPLETE",s.CURRENT="CURRENT",s.PROCESSING="PROCESSING",s.UNSTARTED="UNSTARTED",s.FAILED="FAILED",n.COMPLETE,p.Z,n.CURRENT,n.FAILED,n.PROCESSING,n.UNSTARTED,n.COMPLETE,n.CURRENT,n.PROCESSING,n.FAILED,n.UNSTARTED,n.COMPLETE,n.CURRENT,n.PROCESSING,n.UNSTARTED,n.FAILED;var h=a(80833);function m(){return(m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}var f=e=>u.createElement("svg",m({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 29"},e),d||(d=u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:3.5,d:"m2 27 10-10.294v-4.412L2 2"}))),v=a(10123),E=a(87066);(i=r||(r={}))[i.CREATE_ORDER=0]="CREATE_ORDER",i[i.SEND_DEPOSIT=1]="SEND_DEPOSIT",i[i.RECEIVE_SETTLEMENT=2]="RECEIVE_SETTLEMENT";let x=e=>{var t;let{order:a,depositMethod:s,settleMethod:i}=e||{},{pending:d,processing:l,settling:c,settled:u,refund:p,refunding:h,refunded:m,review:f}=o.UserDepositStatus,{UNSTARTED:v,PROCESSING:x,CURRENT:y,COMPLETE:g,FAILED:b}=n,S=!!(null==a?void 0:a.deposits)&&a.deposits.length>0,C=[p,h,m].includes((null==a?void 0:null===(t=a.deposits[0])||void 0===t?void 0:t.status)||"");return{steps:[{id:r.CREATE_ORDER,title:"Choose coin pair",subtitle:"".concat((null==a?void 0:a.depositMethod.asset)||(null==s?void 0:s.asset)," / ").concat((null==a?void 0:a.settleMethod.asset)||(null==i?void 0:i.asset)," (").concat((null==a?void 0:a.settleMethod.transport)||(null==i?void 0:i.transport),")").toUpperCase(),status:a?g:y},{id:r.SEND_DEPOSIT,title:"Send ".concat((null==a?void 0:a.depositMethod.asset)||(null==s?void 0:s.asset)),status:(()=>{if(!a)return v;if(a.expired&&!S)return b;if(!S)return y;let{deposits:e}=a,{status:t}=(0,E.Zd)(e);switch(t){case d:case l:return x;default:return g}})()},{id:r.RECEIVE_SETTLEMENT,title:"Receive ".concat(C?null==a?void 0:a.depositMethod.asset:(null==a?void 0:a.settleMethod.asset)||(null==i?void 0:i.asset)),status:(()=>{if(!S)return v;let{deposits:e}=a,{status:t}=(0,E.Zd)(e);switch(t){case c:case h:return x;case p:case f:return y;case u:case m:return g;default:return v}})()}]}},y=e=>{let{shouldFire:t,callback:a,targetElementRef:s}=e,i=e=>{(null==s?void 0:s.current)&&e.target&&!s.current.contains(e.target)&&a()};(0,u.useEffect)(()=>(t?document.addEventListener("click",i):document.removeEventListener("click",i),()=>{document.removeEventListener("click",i)}),[t])};var g=a(5034);let b=e=>{let{method:t}=e,{displayName:a,network:s}=t,i=(0,c.HN)(t),n=(0,g.o)(t);return(0,l.jsx)(h.O,{token:{asset:"".concat(a," logo"),network:"".concat(s,"-icon")},tokenImage:i,networkImage:n,"data-sentry-element":"TokenImage","data-sentry-component":"CoinIcon","data-sentry-source-file":"OrderTopbar.tsx"})},S=e=>{var t;let{order:a,depositMethod:s,settleMethod:i}=e,{steps:d}=x({order:a,depositMethod:s,settleMethod:i}),{data:c}=(0,v.Z)(),p=(0,u.useRef)(null),[h,m]=(0,u.useState)(!1),{refund:E,refunding:g,refunded:S}=o.UserDepositStatus,C=[E,g,S].includes((null==a?void 0:null===(t=a.deposits[0])||void 0===t?void 0:t.status)||""),M=(s||(null==a?void 0:a.depositMethod))&&(i||(null==a?void 0:a.settleMethod)),T=s||(null==a?void 0:a.depositMethod),R=C&&a&&(null==c?void 0:c.depositMethods)?c.depositMethods[a.refundMethodId||a.depositMethod.id]:i||(null==a?void 0:a.settleMethod),O=d.find(e=>[n.PROCESSING,n.CURRENT,n.FAILED].includes(e.status))||d[d.length-1];return y({targetElementRef:p,shouldFire:h,callback:()=>m(!1)}),(0,l.jsx)("div",{className:"flex items-center gap-4 pb-6 md:pb-8 md:pt-6","data-sentry-component":"OrderTopbar","data-sentry-source-file":"OrderTopbar.tsx",children:d.map((e,t)=>{let a=M&&T&&e.id===r.SEND_DEPOSIT,s=M&&R&&e.id===r.RECEIVE_SETTLEMENT;return(0,l.jsxs)(u.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center ".concat(0===t?"hidden sm:inline":""),children:[(0,l.jsxs)("span",{className:"".concat(e.id===O.id?"opacity-100":"opacity-40"," text-new-black dark:text-flashbang-white font-text hidden text-sm uppercase transition\n                duration-300 sm:inline\n                "),children:["Step ",t+1,":\xa0"]}),a&&(0,l.jsx)(b,{method:T}),s&&(0,l.jsx)(b,{method:R}),(0,l.jsx)("span",{className:"".concat(e.id===O.id?"opacity-100":"opacity-40"," text-new-black dark:text-flashbang-white font-text text-sm uppercase transition duration-300   ").concat((a||s)&&"ml-2"),children:e.title})]}),t<d.length-1&&(0,l.jsx)(f,{className:"".concat(e.id===O.id?"opacity-100":"opacity-40"," text-new-black dark:text-flashbang-white h-4 transition duration-300\n                ").concat(0===t?"hidden sm:inline":"","\n                ")})]},e.id)})})}},19106:function(e,t,a){a.d(t,{P:function(){return d}});var s=a(89880),i=a(63412),n=a(72971);let d=()=>{let e=(0,n.l)().get(i.I4.ORDER_ID),{asPath:t,isReady:a}=(0,s.useRouter)();return!!(e&&a&&t.includes(e))}},4580:function(e,t,a){a.d(t,{y:function(){return p}});var s=a(82323),i=a(32099),n=a(23236),d=a(73187),r=a(27306),l=a(52983),o=a(70345),c=a(11681),u=a(87066);let p=e=>{var t;let{orderId:a}=e,{data:p,stopPolling:h}=(0,n.a)(c.ly,{variables:{orderId:a||""},pollInterval:1e3,skip:!a}),{settled:m,refunded:f}=d.UserDepositStatus;(0,l.useEffect)(()=>{if(null==p?void 0:p.order){let{deposits:e}=p.order,t=e&&e.length>0?e[e.length-1]:null;t&&(t.status===f||t.status===m)&&h()}},[null==p?void 0:null===(t=p.order)||void 0===t?void 0:t.deposits]);let{depositMethod:v,settleMethod:E}=(0,o.U)(),x=(null==p?void 0:p.order)?(0,i._)((0,s._)({},p.order),{depositMethod:(0,i._)((0,s._)({},p.order.depositMethod),{asset:(0,r.P3)(p.order.depositMethod)}),settleMethod:(0,i._)((0,s._)({},p.order.settleMethod),{asset:(0,r.P3)(p.order.settleMethod)})}):null,y=x&&(0,u.Zd)(x.deposits),g=[d.UserDepositStatus.settled,d.UserDepositStatus.refunded].includes((null==y?void 0:y.status)||""),b=a&&x||!v?!!x&&!g:!!v&&!!E;return{props:x?{order:x}:{depositMethod:v,settleMethod:E},shouldShowOrderTopbar:b}}}}]);